---

### **\#\# 1\. 진단 기록 저장 및 조회 📝**

**현재 상태**: 매번 요청 시 일회성으로 진단하고 결과만 반환합니다. 과거 기록이 남지 않아 이력 관리가 불가능합니다.

추가 기능:  
사용자가 분석했던 이미지와 그 결과를 데이터베이스(예: SQLite, PostgreSQL)에 저장하는 기능입니다.

* **진단 이력 조회 API**: GET /diagnoses 엔드포인트를 만들어 특정 기간 동안의 진단 기록(파일명, 작물, 진단 결과, 신뢰도, 시간 등)을 목록으로 제공합니다.  
* **상세 조회 API**: GET /diagnoses/{diagnosis\_id}로 특정 진단 기록의 상세 내용을 다시 확인할 수 있습니다.

**기대 효과**:

* **사용자 편의성**: 사용자는 과거 진단 내용을 다시 찾아보며 병해 발생 추이를 추적할 수 있습니다.  
* **데이터 활용**: 축적된 데이터를 분석하여 특정 시기에 자주 발생하는 병해 통계를 내는 등 부가적인 정보 제공이 가능해집니다.

---

### **\#\# 2\. 사용자 피드백 루프 구축 🔄**

**현재 상태**: AI 모델이 내린 진단이 최종 결과이며, 만약 결과가 틀려도 이를 바로잡을 방법이 없습니다.

추가 기능:  
AI의 진단 결과에 대해 사용자가 '정확해요' 또는 '틀렸어요 (실제 병명은 OOO)'와 같이 피드백을 남길 수 있는 기능입니다.

* **피드백 제출 API**: POST /diagnoses/{diagnosis\_id}/feedback 엔드포인트를 통해 특정 진단 결과에 대한 사용자 피드백을 제출받습니다.

**기대 효과**:

* **모델 성능 개선**: 사용자의 피드백 데이터(특히 오진단 사례)는 매우 중요합니다. 이 데이터를 수집하여 추후 AI 모델을 재학습시키는 데 사용하면 진단 정확도를 지속적으로 높일 수 있습니다.  
* **사용자 참여 유도**: 사용자가 서비스 개선에 직접 기여하게 함으로써 더 높은 만족도와 신뢰를 얻을 수 있습니다.

---

### **\#\# 3\. 다중 이미지 일괄 분석 🖼️+**

**현재 상태**: 한 번에 하나의 이미지만 업로드하여 분석할 수 있습니다.

추가 기능:  
사용자가 여러 개의 이미지 파일을 한 번에 업로드하면, 서버가 모든 이미지를 순차적으로 분석하여 결과를 모아 한 번에 반환하는 기능입니다.

* **일괄 진단 API**: POST /diagnose-batch/{crop\_name}과 같은 엔드포인트를 만들어 여러 파일(List\[UploadFile\])을 받을 수 있도록 수정합니다.

**기대 효과**:

* **사용자 경험 향상**: 농장의 여러 식물 사진을 찍어둔 사용자가 한 장씩 업로드하는 번거로움 없이, 한 번의 요청으로 모든 결과를 받을 수 있어 매우 편리합니다.

---

### **\#\# 4\. 입력 이미지 유효성 검사 강화 ✅**

**현재 상태**: 이미지 파일 형식(image/...)만 확인하고 바로 AI 모델에 전달합니다. 식물과 전혀 관련 없는 이미지가 들어와도 일단 분석을 시도합니다.

추가 기능:  
AI 모델이 분석하기 전에 이미지가 유효한지 간단히 확인하는 단계를 추가합니다.

* **유효성 검사 로직**:  
  * **객체 탐지**: 이미지 안에 '잎', '식물'과 같은 객체가 있는지 간단한 객체 탐지 모델로 확인합니다.  
  * **이미지 품질**: 이미지가 너무 흐리거나 어두워서 분석이 어려운 경우, 사용자에게 경고를 보냅니다.

**기대 효과**:

* **시스템 안정성**: 의미 없는 입력값으로 인해 AI 모델이 비정상적인 결과를 내놓는 것을 방지합니다.  
* **신뢰도 있는 결과**: 사용자에게 "이 사진은 품질이 낮아 분석이 어려울 수 있습니다"와 같은 안내를 제공하여 결과의 신뢰도를 높일 수 있습니다.
